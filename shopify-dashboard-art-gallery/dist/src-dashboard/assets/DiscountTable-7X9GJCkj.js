import{r as o,j as s,n as f}from"./index-SqxPX7HF.js";const r=["id","code","description","discount_type","amount","start_date","end_date","applicable_products"],j=()=>{const[u,p]=o.useState([]),[a,h]=o.useState(r.map((t,e)=>e<8)),[i,d]=o.useState(!1),c=o.useRef(null);o.useEffect(()=>{(async()=>{try{const e=await fetch("http://127.0.0.1:8000/store/discounts/");if(!e.ok)throw new Error("Network response was not ok");const n=await e.json();p(n)}catch(e){console.error("Error fetching discounts:",e)}})()},[]),o.useEffect(()=>{const t=e=>{c.current&&!c.current.contains(e.target)&&d(!1)};return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const m=t=>{const e=[...a];if(e[t])e[t]=!1;else{if(e.filter(Boolean).length>=4){const l=e.findIndex(x=>x);e[l]=!1}e[t]=!0}h(e)};return s.jsxs("div",{className:"p-4",children:[s.jsx("div",{children:s.jsx("p",{className:"text-2xl font-bold text-[#303030]",children:"Discounts"})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 mt-4",children:[s.jsx("div",{className:"flex justify-end",children:s.jsxs("div",{className:"relative inline-block",ref:c,children:[s.jsx("button",{className:"bg-blue-500 text-white px-4 py-2 rounded focus:outline-none",onClick:()=>d(!i),children:s.jsx("span",{children:s.jsx(f,{})})}),i&&s.jsx("div",{className:"absolute right-0 mt-2 w-60 bg-white border rounded shadow-lg z-10 h-[300px] overflow-y-auto",children:r.map((t,e)=>s.jsx("div",{className:"px-4 py-2",children:s.jsxs("label",{className:"inline-flex items-center",children:[s.jsx("input",{type:"checkbox",className:"form-checkbox text-blue-600",checked:a[e],onChange:()=>m(e)}),s.jsx("span",{className:"ml-2",children:t.replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase())})]})},e))})]})}),s.jsx("div",{className:"overflow-x-auto mt-4",children:s.jsxs("table",{className:"min-w-full table-auto border-collapse",children:[s.jsx("thead",{children:s.jsx("tr",{children:r.map((t,e)=>a[e]&&s.jsx("th",{className:"border px-4 py-2 bg-[#D9D9D9]",children:t.replace(/_/g," ").replace(/\b\w/g,n=>n.toUpperCase())},e))})}),s.jsx("tbody",{children:u.map((t,e)=>s.jsx("tr",{children:r.map((n,l)=>a[l]&&s.jsx("td",{className:"border px-4 py-2",children:t[n]!==null?t[n].toString():"N/A"},l))},e))})]})})]})]})};export{j as default};
